<html>
	<head>

	</head>
	<body>
		<div id="graph0" style="width:200px; height:100px;"></div>
		<div id="graph1"style="width:200px; height:100px;"></div>
		<div id="graph2"style="width:200px; height:100px;"></div>
		<div id="graph3"style="width:200px; height:100px;"></div>

		<select onChange="console.log(this.value)">
			<option>-|-</option>
			<option>thing1</option>
			<option>thing2</option>
		</select>
		<input type="checkbox" onChange = "printout(this.checked)"/>
		<textarea onChange = "thingS(this.value)"></textarea>
		<input type="button" onclick="testStuff()">
		<div id="audioList">

		</div>
		<div id="soundDiv"></div>
		<div id="listTest">
			<select id="emListen">
				<option>-win-</option>
				<option value="thing">lulz</option>
				<option>win</option>
			</select>
		</div>
		<input type="button" value = "thingHelp" onclick="thingHelp"/>
	</body>
	<footer>
		<script type= "text/javascript" src="../script/jquery164.min.js"></script>
		<script type="text/javascript" src="../script/highcharts.js"></script>
		<script>
						var graphings = new Array();
			newsBlurApi();
			//		graphs();
			//		setInterval(updateGraphs,250);
			//		setTimeout(addGraph,2500);

			function newsBlurApi(){
			$.post("http://www.newsblur.com/api/login", { username: "iPodling", password: "bac0n1.23" })
			.done(function(data) {
				alert("Data Loaded: " + data);
			}
			);
			$.ajax({
			type : "POST",
			url : "http://newsblur.com/api/login",
			async : false,
			crossDomain: true,
			dataType: 'jsonp',
			data : {
			username : "iPodling",
			password : "bac0n1.23"
			},
			success : function(response){
			console.log(response);
			}
			})

			}
			function addGraph(){
			graphings.push(
			new Highcharts.Chart({
			chart: {
			renderTo:	"graph3",
			//type: 'spline',
			type : 'area',
			marginRight: 10,
			ignoreHiddenSeries : true,
			events: {
			load: function() {

			// set up the updating of the chart each second
			var series = this.series[0];

			}
			}
			},
			title: false,

			credits: {
			enabled: false
			},
			xAxis: {
			type: 'datetime',
			tickPixelInterval: 150
			},
			yAxis: {
			max : 10,
			min : 0,
			title: false,
			plotLines: [{
			value: 0,
			width: 1,
			color: '#808080'
			}]
			},
			tooltip: {
			formatter: function() {
			return Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+Highcharts.numberFormat(this.y, 2);
			}
			},
			plotOptions: {
			area: {
			threshold : -999999,
			marker: {
			enabled: false,
			symbol: 'circle',
			radius: 2,
			states: {
			hover: {
			enabled: true
			}
			}
			}
			}
			},
			legend: {
			enabled: false
			},
			exporting: {
			enabled: false
			},
			series: [{
			name: 'Streamed Data',
			data: (function() {
			// generate an array of random data
			var data = [],
			time = (new Date()).getTime(),
			i;
			for (i = 50 * -1; i <= 0; i++) {
			data.push({
			x: time + i * 1000,
			y: -999999
			});
			}
			return data;
			})()
			}]
			}));
			}
			//updateGraphs();

			function updateGraphs(){
			for(var i = 0; i < graphings.length; i++){
			graphings[i].series[0].addPoint([(new Date()).getTime(), Math.random()*10], true, true);
			}
			}
			function graphs(){

			for(var i = 0; i < 3; i++){
			graphings.push(
			new Highcharts.Chart({
			chart: {
			renderTo:	"graph"+i,
			//type: 'spline',
			type : 'area',
			marginRight: 10,
			ignoreHiddenSeries : true,
			events: {
			load: function() {

			// set up the updating of the chart each second
			var series = this.series[0];

			}
			}
			},
			title: false,

			credits: {
			enabled: false
			},
			xAxis: {
			type: 'datetime',
			tickPixelInterval: 150
			},
			yAxis: {
			max : 10,
			min : 0,
			title: false,
			plotLines: [{
			value: 0,
			width: 1,
			color: '#808080'
			}]
			},
			tooltip: {
			formatter: function() {
			return Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) +'<br/>'+Highcharts.numberFormat(this.y, 2);
			}
			},
			plotOptions: {
			area: {
			threshold : -999999,
			marker: {
			enabled: false,
			symbol: 'circle',
			radius: 2,
			states: {
			hover: {
			enabled: true
			}
			}
			}
			}
			},
			legend: {
			enabled: false
			},
			exporting: {
			enabled: false
			},
			series: [{
			name: 'Streamed Data',
			data: (function() {
			// generate an array of random data
			var data = [],
			time = (new Date()).getTime(),
			i;
			for (i = 50 * -1; i <= 0; i++) {
			data.push({
			x: time + i * 1000,
			y: -999999
			});
			}
			return data;
			})()
			}]
			}));
			}

			}

			function thingHelp(){
			document.getElementById("emListen").value="thing";
			}
			//var audio = new Audio().canPlayType('audio/ogg','audio/mp3', 'audio/wav');
			//audio.setAttribute("src","../audio/samples/testSample.mp3");
			//audio.setAttribute("src","../audio/samples/testSample.ogg");
			//audio.setAttribute("src","../audio/samples/testSample.wav");
			//audio.load();
			//audio.play();
			//#=
			console.log();
			//addAudioList();
			setTimeout(function(){document.getElementById("emListen").innerHTML+="<option>wat</option>"},5000);
			function testStuff(){
			console.log("testing");
			var test = document.getElementsByClassName("hiddenAudioPlayers");
			for(var i=0; i <test.length; i++){
			test[i].play();
			}
			}
			function addAudioList(){
			var fileTypes = soundFiles.opts;
			var stringToInsert = "<select id='addAudioMenu' onchange = (function(){addAudio(document.getElementById('addAudioMenu').value)})();>"
			stringToInsert+="<option value = ''>- Select an audio track -</option>";
			var songsSelected = [];
			for(var key in soundFiles){
			if(key != "opts"){
			for(var i = 0; i < soundFiles[key].length; i++){
			stringToInsert+="<option value = '"+key+"||"+soundFiles[key][i]+"'>"+soundFiles[key][i].replace(/_/g,' ')+"</option>";
			}
			}
			}
			stringToInsert += "</select>"
			document.getElementById("audioList").innerHTML = stringToInsert;
			}
			function addAudio(songToAdd){
			var songFolder = songToAdd.split("||")[0];
			var songName = songToAdd.split("||")[1];
			if(songToAdd != "" && document.getElementById(idPrefix+songFolder+songName) == undefined){
			songsSelected.push(songName);
			//now to add audio element
			var insertString = "<audio class='hiddenAudioPlayers' id='"+idPrefix+songFolder+songName+"'>";
			for(var i = 0; i < soundFiles.opts.length; i++){
			//console.log(soundFiles.opts[i][0]);
			insertString += "<source src='"+basePath+songFolder+"/"+songName+"."+soundFiles.opts[i][0]+"' type='audio/"+soundFiles.opts[i][1]+"'>";
			}
			insertString += "</audio>";
			document.getElementById("soundDiv").innerHTML += insertString;
			//document.getElementById(idPrefix + songFolder + songName).play();
			}
			}

			function removeAudio(songToRemove){
			var songFolder = songToAdd.split("||")[0];
			var songName = songToAdd.split("||")[1];

			var element = document.getElementById(idPrefix + songFolder + songName);
			element.parentNode.removeChild(element);
			}

			function loadJSON(filePath) {
			// Load json file;
			var json = loadTextFileAjaxSync(filePath, "application/json");
			// Parse json
			return JSON.parse(json);
			}

			function loadTextFileAjaxSync(filePath, mimeType){
			var xmlhttp=new XMLHttpRequest();
			xmlhttp.open("GET",filePath,false);
			if (mimeType != null) {
			if (xmlhttp.overrideMimeType) {
			xmlhttp.overrideMimeType(mimeType);
			}
			}
			xmlhttp.send();
			if (xmlhttp.status==200)
			{
			return xmlhttp.responseText;
			}
			else {
			// TODO Throw exception
			return null;
			}
			}

			function thingS(value){
			//value = value.toString();
			console.log(parseFloat(value.rep));
			console.log(value.indexOf("thing"));
			}
			function printout(input){
			console.log(input);
			}
			function getType(input) {
			var m = (/[\d]+(\.[\d]+)?/).exec(input);
			if (m) {
			console.log(m);
			// Check if there is a decimal place
			if (m[1]) {
			console.log(m[1]);
			if(input.contains(".")){
			return 'float';}

			}

			else { return 'int'; }
			}
			return 'string';
			}
		</script>
	</footer>
</html>